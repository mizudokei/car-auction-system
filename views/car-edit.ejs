<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= title %></title>
    <link rel="stylesheet" href="/css/car-edit.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css">
    <script src="/js/imagePreview.js" defer></script>
</head>
<body>
    <div class="d-flex">
        <%- include('partials/admin-sidebar', { currentPath: '/carManagement' }) %>
        <div class="container">
            <main class="car-edit-container">
                <div class="car-image-container">
                    <img src="<%= car.car_image ? car.car_image : '/resources/demo.png' %>" alt="車両画像" class="car-image-preview">
                </div>
                <div class="car-form-container">
                    <form action="/updateCar/<%= car.car_id %>" method="POST" enctype="multipart/form-data" class="edit-car-form">
                        <div class="form-group">
                            <label for="car_image_upload">車両画像</label>
                            <input type="file" id="car_image_upload" name="car_image" class="form-input">
                        </div>
                        <div class="form-group">
                            <label for="car_type">車種</label>
                            <input type="text" id="car_type" name="car_type" value="<%= car.car_type %>" class="form-input" required>
                        </div>
                        <div class="form-group">
                            <label for="car_manufacturer">メーカー名</label>
                            <select id="car_manufacturer" name="car_manufacturer" class="form-input" required>
                                <% manufacturers.forEach(manufacturer => { %>
                                    <option value="<%= manufacturer.manufacturer_id %>" <%= car.manufacturer_id === manufacturer.manufacturer_id ? 'selected' : '' %>>
                                        <%= manufacturer.manufacturer_name %>
                                    </option>
                                <% }) %>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="car_year">年式</label>
                            <input type="number" id="car_year" name="car_year" value="<%= car.car_year %>" class="form-input" required>
                        </div>
                        <div class="form-group">
                            <label for="car_mileage">走行距離</label>
                            <input type="text" id="car_mileage" name="car_mileage" value="<%= car.car_mileage %>" class="form-input" required>
                        </div>
                        <div class="form-group">
                            <label for="car_color">車体カラー</label>
                            <input type="text" id="car_color" name="car_color" value="<%= car.car_color %>" class="form-input" required>
                        </div>
                        <button type="submit" class="submit-button">更新</button>
                    </form>
                </div>
            </main>
        </div>
    </div>
</body>
</html>
